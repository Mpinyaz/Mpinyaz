name: Sync Profile README to Pages

on:
  push:
    branches: [main, master]
  workflow_dispatch:

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Profile Repo
        uses: actions/checkout@v4

      - name: Prepare file for sync
        # We rename it to profile-bio.md to avoid overwriting your
        # main repo's README.md by accident.
        run: |
          mkdir -p public
          cp README.md public/README.md

      - name: Deploy to External Pages Repo
        uses: peaceiris/actions-gh-pages@v4
        with:
          # Use the PAT secret you created earlier
          personal_token: ${{ secrets.PAGES_REPO_TOKEN }}
          # Point to your website repository
          external_repository: Mpinyaz/mpinyaz.github.io
          publish_dir: ./public
          # CRITICAL: This prevents the action from deleting your other files
          keep_files: true
          publish_branch: main
          # This puts the file in the root of the destination repo
          destination_dir: .
